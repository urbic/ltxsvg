#!/usr/bin/perl

use warnings;

use utf8;
use LTXSVG;
use IO::Handle;
use Getopt::Long qw/:config no_ignore_case bundling/;

my (%options, $outputName, $preambleName);
GetOptions(
	'o|output-file=s'=>\$outputName,
	'p|preamble-file=s'=>\$preambleName,
	's|scale=f'=>\$options{scale},
	);

my $inputName=shift;
undef $outputName if defined $outputName and $outputName eq '-';

if(defined $preambleName)
{
	open my $preambleFile, '<', $preambleName
		or die "Can not open preamble file “$preambleName”: $!";
	my $preamble;
	$preamble.=$_ while <$preambleFile>;
	$options{preamble}=$preamble;
}

my $ltxsvg=LTXSVG->new(%options);

$ltxsvg->processFile($inputName, $outputName);
